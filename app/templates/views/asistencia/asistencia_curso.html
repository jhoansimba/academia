{% include "views/default/header.html" %}
<nav aria-label="...">
    <ul class="pagination">
      <li class="page-item disabled">
        <span class="page-link">Previous</span>
      </li>     
      <li class="page-item"><a class="page-link" href="/docentes">1</a></li>
      <li class="page-item active" aria-current="page">
        <span class="page-link">2</span>
      </li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item">
        <a class="page-link" href="#">Next</a>
      </li>
    </ul>
  </nav>
<div class="card">
    <div class="card-header">Agregar Asistencia</div>
    <div class="card-body">
        {% if form.errors %}
        <p> {{form.errors}} </p>
        {% endif %}
               <form action="" id="form" method="POST">
            {% csrf_token %}
            <table class="table">
                <thead>
                    <th>Nombre del Estudiante</th>
                    <th>Asistencia / Fecha</th>
                </thead>
                <tbody>
                    {% for i in estudiantes %}
                    <tr>
                        <td>{{i}}</td>
                        <td>
                            <div class="form-check">
                                <input class="" type="checkbox" value="{{i.id_est}}" name="estudiante" >
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <input type="submit" class="btn btn-success" value="Aceptar">
        </form>
    </div>
    <p> {{date}} </p>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
<script>
    $('#form').on('submit', function(e){
        e.preventDefault();
        if(confirm('¿Está seguro de guardar la asistencia?')){
            let form = $('#form').serializeArray();
            $.ajax({
                url : '',
                method : 'POST',
                data : form
            }).done((req) =>{
                if(req.info){
                    alert('Asistencia registrada');
                }else{
                    alert('Error: ', req.errors);
                }
            });
        }else{
            alert('Registro Cancelado')
        }
    });
    // $('#horarios').on('change', function(){
    //     let valor = document.getElementById('horarios')[$(this).val()].innerHTML;
    //     document.getElementsByName('hora')[0].value = valor;
    // });
</script>


{% include "views/default/footer.html" %}